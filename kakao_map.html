<html>
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	    <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Kakao 지도 시작하기</title>
	    <style>body { font-family: -apple-system, Helvetica; sans-serif; }</style>
	</head>
	<body>
	<div id="map" style="width:100%;height:65%;"></div>
	<input type="button" onclick="btn_my_gps_click()" value="내위치" />
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8c0dbdd57a9cf19e4f4da0d2213ae714&libraries=services"></script>
	<script>
		var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(33.450701, 126.570667),
			level: 3
		};
		// 지도를 생성합니다
		var map = new kakao.maps.Map(container, options);
		// 주소-좌표 변환 객체를 생성합니다
		var geocoder = new kakao.maps.services.Geocoder();
		// 지도 확대/축소 컨트롤 표시
		var zoomControl = new kakao.maps.ZoomControl();
		map.addControl(zoomControl, kakao.maps.ControlPosition.Right);

		// 마커
		var marker = new kakao.maps.Marker(),
		infowindow = new kakao.maps.InfoWindow({zindex:1}); // 클릭한 위치에 대한 주소를 표시할 인포윈도우입니다

		// 지도에 오른쪽클릭 이벤트를 등록합니다
		// 지도를 클릭하면 마지막 파라미터로 넘어온 함수를 호출합니다
		// rightclick == [Mobile]LongPress
		kakao.maps.event.addListener(map, 'rightclick', function(mouseEvent) {        
			// 클릭한 위도, 경도 정보를 가져옵니다 
			var latlng = mouseEvent.latLng;

			marker.setPosition(latlng);
			marker.setMap(map);
			
			var message = '클릭한 위치의 위도는 ' + latlng.getLat() + ' 이고, ';
			message += '경도는 ' + latlng.getLng() + ' 입니다';

			console.log(message);

			searchDetailAddrFromCoords(mouseEvent.latLng, function(result, status) {
				if (status === kakao.maps.services.Status.OK) {
					var detailAddr = !!result[0].road_address ? '<div>도로명주소 : ' + result[0].road_address.address_name + '</div>' : '';
		            detailAddr += '<div>지번 주소 : ' + result[0].address.address_name + '</div>';
            
				    var content = '<div class="bAddr">' +
								  '<span class="title">법정동 주소정보</span>' + 
		                            detailAddr + 
					              '</div>';
					
					// 인포윈도우에 클릭한 위치에 대한 법정동 상세 주소정보를 표시합니다
					infowindow.setContent(content);
					infowindow.open(map, marker);
				}
			});
		});

		function searchDetailAddrFromCoords(coords, callback) {
			// 좌표로 법정동 상세 주소 정보를 요청합니다
			geocoder.coord2Address(coords.getLng(), coords.getLat(), callback);
		}

		
		// 내위치 버튼 클릭 시
		function btn_my_gps_click(){
			if( navigator.geolocation )
			{
				navigator.geolocation.getCurrentPosition(function(position){
					var lat = position.coords.latitude,  // 위도
						lon = position.coords.longitude; // 경도
					var locPosition = new kakao.maps.LatLng(lat, lon);
					marker.setPosition(locPosition);
					marker.setMap(map);
					map.setCenter(locPosition) // 위치 이동
				});
			}
			else{
				aler("내위치를 확인할 수 없습니다");
			}
		}

		// 로그 테스트
		function getInfo() {
			// 지도의 현재 중심좌표를 얻어옵니다 
			var center = map.getCenter(); 
			
			// 지도의 현재 레벨을 얻어옵니다
			var level = map.getLevel();
			
			// 지도타입을 얻어옵니다
			var mapTypeId = map.getMapTypeId(); 
			
			// 지도의 현재 영역을 얻어옵니다 
			var bounds = map.getBounds();
			
			// 영역의 남서쪽 좌표를 얻어옵니다 
			var swLatLng = bounds.getSouthWest(); 
			
			// 영역의 북동쪽 좌표를 얻어옵니다 
			var neLatLng = bounds.getNorthEast(); 
			
			// 영역정보를 문자열로 얻어옵니다. ((남,서), (북,동)) 형식입니다
			var boundsStr = bounds.toString();
			
			
			var message = '지도 중심좌표는 위도 ' + center.getLat() + ', <br>';
			message += '경도 ' + center.getLng() + ' 이고 <br>';
			message += '지도 레벨은 ' + level + ' 입니다 <br> <br>';
			message += '지도 타입은 ' + mapTypeId + ' 이고 <br> ';
			message += '지도의 남서쪽 좌표는 ' + swLatLng.getLat() + ', ' + swLatLng.getLng() + ' 이고 <br>';
			message += '북동쪽 좌표는 ' + neLatLng.getLat() + ', ' + neLatLng.getLng() + ' 입니다';
			
			// 개발자도구를 통해 직접 message 내용을 확인해 보세요.
			// ex) console.log(message);
			console.log(message);
		}
	</script>
    </body>
</html>
